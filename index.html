<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Raumschiff Ausweichspiel</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: black;
        font-family: Arial, sans-serif;
        color: white;
        text-align: center;
    }
    #gameCanvas {
        display: block;
        margin: 0 auto;
        background: linear-gradient(to top, #000 0%, #111 100%);
        border: 2px solid #fff;
    }
    #score {
        font-size: 1.5em;
        margin: 10px;
    }
    #startBtn {
        padding: 10px 20px;
        font-size: 1.2em;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        background-color: #00e676;
        color: #000;
        margin-top: 10px;
    }
    #startBtn:hover {
        background-color: #00c853;
    }
</style>
</head>
<body>

<h1>Raumschiff Ausweichspiel</h1>
<div id="score">Punkte: 0</div>
<button id="startBtn">Spiel starten</button>
<canvas id="gameCanvas" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startBtn');
const scoreEl = document.getElementById('score');

let ship = { x: 280, y: 350, width: 40, height: 40, speed: 5 };
let keys = {};
let obstacles = [];
let score = 0;
let gameInterval, obstacleInterval;

// Tastatureingaben
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Raumschiff zeichnen
function drawShip() {
    ctx.fillStyle = '#00f';
    ctx.beginPath();
    ctx.moveTo(ship.x + ship.width/2, ship.y);
    ctx.lineTo(ship.x, ship.y + ship.height);
    ctx.lineTo(ship.x + ship.width, ship.y + ship.height);
    ctx.closePath();
    ctx.fill();
}

// Hindernisse zeichnen
function drawObstacles() {
    ctx.fillStyle = '#f00';
    obstacles.forEach(obs => {
        ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
    });
}

// Update Spielzustand
function update() {
    // Raumschiff bewegen
    if (keys['ArrowLeft'] && ship.x > 0) ship.x -= ship.speed;
    if (keys['ArrowRight'] && ship.x + ship.width < canvas.width) ship.x += ship.speed;
    if (keys['ArrowUp'] && ship.y > 0) ship.y -= ship.speed;
    if (keys['ArrowDown'] && ship.y + ship.height < canvas.height) ship.y += ship.speed;

    // Hindernisse bewegen
    obstacles.forEach(obs => obs.y += obs.speed);

    // Kollision prüfen
    for (let obs of obstacles) {
        if (ship.x < obs.x + obs.width &&
            ship.x + ship.width > obs.x &&
            ship.y < obs.y + obs.height &&
            ship.y + ship.height > obs.y) {
            endGame();
            return;
        }
    }

    // Punkte erhöhen
    score += 0.02;
    scoreEl.textContent = `Punkte: ${Math.floor(score)}`;
}

// Neue Hindernisse erstellen
function createObstacle() {
    const width = 30 + Math.random() * 40;
    const x = Math.random() * (canvas.width - width);
    const speed = 2 + Math.random() * 3;
    obstacles.push({ x: x, y: -50, width: width, height: 20, speed: speed });
}

// Spiel rendern
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawShip();
    drawObstacles();
}

// Hauptschleife
function gameLoop() {
    update();
    draw();
}

// Spiel starten
function startGame() {
    ship.x = 280;
    ship.y = 350;
    obstacles = [];
    score = 0;
    scoreEl.textContent = 'Punkte: 0';
    startBtn.disabled = true;

    gameInterval = setInterval(gameLoop, 20);
    obstacleInterval = setInterval(createObstacle, 1000);
}

// Spiel beenden
function endGame() {
    clearInterval(gameInterval);
    clearInterval(obstacleInterval);
    alert(`Spiel vorbei! Deine Punkte: ${Math.floor(score)}`);
    startBtn.disabled = false;
}

startBtn.addEventListener('click', startGame);
</script>

</body>
</html>
